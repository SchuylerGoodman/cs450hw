<!doctype html>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>CS450 HW Framework</title>
<style type="text/css">
i
{
	font-family: monospace;
}
b
{
	font-size: smaller;
	font-family: sans-serif;
}
.code
{
	margin: 0;
	border: 2px solid black;
	padding: 10px;
	background: #e0e0e0;
	font-size: 15px;
	font-family: monospace;
	white-space: pre;
}
</style>
</head>
<body>
<h1>CS450 HW Framework</h1>

<h2>What's The Point?</h2>
<p>
The goal of the CS450 framework is to enable the student to quickly implement image processing tasks
by eliminating the need to manage secondary aspects such as image file formats, file I/O commands,
UI libraries and event handling APIs.
</p>

<h2>Is It Easy?</h2>
<p>
Creating a new task is as simple as adding a public method named <i>doSomething</i>.
Running the program will then show a button with text <b>Something</b>.
Clicking the button executes the method that performs your image processing task.
</p>

<p class="code" style="width:400px;float:left;margin-right:20px">   public void doSomething()
   {
      // image processing code goes here
   }
</p>
<img src="img/something.png" alt="button Something" />

<h2>From Where Do I Download It?</h2>
<p>
Here: <a href="cs450hw.zip">cs450hw.zip</a>
</p>

<h2>It Can Already Read And Write Images?</h2>
<p>
The running application has two image frames titled <b>Image A</b> and <b>Image B</b>.
The default buttons <b>Open</b> and <b>Save</b> will load into <b>Image A</b>, and save <b>Image B</b> out to disk respectively.
Image format is determined by the file name extension.
Making sure to include the JAI library in the classpath at runtime will enable the application
to read and write TIFF, PPM and PGM formats.
Without the JAI library, the application can still handle PNG, GIF, JPEG and BMP formats.
</p>

<h2>How About A Simple Example?</h2>
<p>
Let's take a look at an example that simply filters the blue channel of a color image:
</p>
<img src="img/bluefilter.png" alt="Screenshot: Blue Filter" />

<p>
Most image processing tasks will be a variation of the following steps:
<ol>
<li>get Image A</li>
<li>allocate a new image (usually of the same size as Image A)</li>
<li>set the pixels in the new image based on pixels from Image A</li>
<li>set Image B to display the new image</li>
</ol>
The code that implements <i>doBlue_Filter()</i> performs each step of this sequence.
Notice that its first step calls <i>CS450.getImageA()</i>
and its final step passes the <i>outputImage</i> to <i>CS450.setImageB()</i>.
</p>

<p class="code" style="margin-top:16px;width:850px">   public void doBlue_Filter()
   {
      BufferedImage inputImage = CS450.getImageA();
      int width = inputImage.getWidth();
      int height = inputImage.getHeight();
      BufferedImage outputImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
      
      WritableRaster in = inputImage.getRaster();
      WritableRaster out = outputImage.getRaster();
      
      for (int y = 0; y < height; y++)
      {
         for (int x = 0; x < width; x++)
         {
            int blue = in.getSample(x, y, 2); // channel 0:red 1:green 2:blue
            out.setSample(x, y, 2, blue);
         }
      }
      
      CS450.setImageB(outputImage);
   }
</p>

<h2>How Do I Create A New Image?</h2>
<p>
To create a new image, just instantiate a <i>BufferedImage</i>.
The constructor takes three arguments: <i>width</i>, <i>height</i>, and <i>imageType</i>.
Use <i>BufferedImage.TYPE_INT_RGB</i> for a new color image,
and use <i>BufferedImage.TYPE_BYTE_GRAY</i> for a grayscale image.
</p>
<p class="code" style="width:832px">      BufferedImage colorImage = new BufferedImage(384, 256, BufferedImage.TYPE_INT_RGB);
      BufferedImage grayImage = new BufferedImage(512, 512, BufferedImage.TYPE_BYTE_GRAY);
</p>

<h2>How Do I Access And Modify Pixel Values?</h2>
<p>
You can obtain a <i>WritableRaster</i> from a <i>BufferedImage</i> by calling <i>getRaster()</i>.
<i>WritableRaster</i> allows you to access the color channels individually with <i>getSample(...)</i> and <i>setSample(...)</i>.
The code below demonstrates the usage of both methods.
Notice that the third argument specifies which color channel to access: 0 for red, 1 for green, 2 for blue.
If you are working with a grayscale raster, then only channel 0 for gray intensity is available.
</p>
<p class="code" style="width:832px">   public void doPixel_Task()
   {
      int x = 12;
      int y = 47;
      
      BufferedImage inputImage = CS450.getImageA();
      WritableRaster inRaster = inputImage.getRaster();
      int red = inRaster.getSample(x, y, 0);
      int green = inRaster.getSample(x, y, 1);
      int blue = inRaster.getSample(x, y, 2);
      
      BufferedImage outputImage = new BufferedImage(50, 50, BufferedImage.TYPE_INT_RGB);
      WritableRaster outRaster = outputImage.getRaster();
      outRaster.setSample(x, y, 0, red);
      outRaster.setSample(x, y, 1, green);
      outRaster.setSample(x, y, 2, blue);
   }
</p>

<h2>How can I prompt the user for input?</h2>
<p>
To allow the user to specify parameters at runtime, use <i>CS450.prompt(...)</i>.
The <i>prompt</i> method takes up to three arguments:
<ul>
<li><i>message</i> - text that instructs the user what to enter</li>
<li><i>choices</i> (OPTIONAL) - a <i>String</i> array used to make a dropdown list for the user to choose from</li>
<li><i>defaultValue</i> (OPTIONAL) - the default value to display in the prompt dialog</li>
</ul>
</p>

<p class="code" style="width:600px;display:inline-block;vertical-align:middle">   String[] choices = {"RED", "GREEN", "BLUE"};
   String colorChannel = CS450.prompt("color", choices, "GREEN");
   if (colorChannel == null) return;
</p>
<img src="img/prompt.png" alt="Example User Prompt" style="vertical-align:middle" />

<p>
The method call will return the user input as a <i>String</i>.
If the user clicked <b>Cancel</b>, then the method will return null.
You will find examples in the framework source which comes with two sample tasks that prompt the user for input.
</p>
</body>
</html>
